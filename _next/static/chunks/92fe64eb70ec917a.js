(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8635,(t,e,r)=>{let n="Pages_Test";e.exports={output:"export",basePath:`/${n}`,assetPrefix:`/${n}/`,images:{unoptimized:!0}}},477,t=>{"use strict";var e=t.i(1398),r=t.i(1789);let n={f:0,x:0,y:0,z:0},i=180/Math.PI;function o(t,e=1){let{f:r,x:n,y:i,z:l}=t;if(e<=0)throw Error("steps must be greater than 0");if(e>l)throw Error(`Getting parent tile of ${JSON.stringify(t)}, ${e} steps is not possible because it would go beyond the root tile (z=0)`);return{f:r>>e,x:n>>e,y:i>>e,z:l-e}}function l(t=n){let{f:e,x:r,y:i,z:o}=t;return[{f:2*e,x:2*r,y:2*i,z:o+1},{f:2*e,x:2*r+1,y:2*i,z:o+1},{f:2*e,x:2*r,y:2*i+1,z:o+1},{f:2*e,x:2*r+1,y:2*i+1,z:o+1},{f:2*e+1,x:2*r,y:2*i,z:o+1},{f:2*e+1,x:2*r+1,y:2*i,z:o+1},{f:2*e+1,x:2*r,y:2*i+1,z:o+1},{f:2*e+1,x:2*r+1,y:2*i+1,z:o+1}]}function s(t=n){let{f:e,x:r,y:i,z:o}=t;return[u({f:e,x:r,y:i,z:o}),u({f:e,x:r+1,y:i,z:o}),u({f:e,x:r,y:i+1,z:o}),u({f:e,x:r+1,y:i+1,z:o}),u({f:e,x:r-1,y:i,z:o}),u({f:e,x:r,y:i-1,z:o}),u({f:e,x:r-1,y:i-1,z:o}),u({f:e,x:r+1,y:i-1,z:o}),u({f:e,x:r-1,y:i+1,z:o})]}function a(t){let e=Math.PI-2*Math.PI*t.y/Math.pow(2,t.z);return{lng:t.x/Math.pow(2,t.z)*360-180,lat:i*Math.atan(.5*(Math.exp(e)-Math.exp(-e)))}}function u(t){let{z:e,f:r,x:n,y:i}=t;return{z:e,f:Math.max(Math.min(r,2**e),-(2**e)),x:n<0?n+2**e:n%2**e,y:i<0?i+2**e:i%2**e}}function f(t,e,r={}){let n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function h(t,e={}){let r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function y(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function p(t,e){!function(t,e){var r,n,i,o,l,s,a,u,f,h,y=0,p="FeatureCollection"===t.type,c="Feature"===t.type,g=p?t.features.length:1;for(r=0;r<g;r++){for(i=0,s=p?t.features[r].geometry:c?t.geometry:t,u=p?t.features[r].properties:c?t.properties:{},f=p?t.features[r].bbox:c?t.bbox:void 0,h=p?t.features[r].id:c?t.id:void 0,l=(a=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1;i<l;i++){if(null===(o=a?s.geometries[i]:s)){if(!1===e(null,y,u,f,h))return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,y,u,f,h))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],y,u,f,h))return!1;break;default:throw Error("Unknown Geometry Type")}}y++}}(t,function(t,r,n,i,o){var l,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":if(!1===e(f(t,n,{bbox:i,id:o}),r,0))return!1;return}switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon"}for(var a=0;a<t.coordinates.length;a++)if(!1===e(f({type:l,coordinates:t.coordinates[a]},n),r,a))return!1})}var c=function(t,e={}){if(null!=t.bbox&&!0!==e.recompute)return t.bbox;let r=[1/0,1/0,-1/0,-1/0];return!function t(e,r,n){if(null!==e)for(var i,o,l,s,a,u,f,h,y=0,p=0,c=e.type,g="FeatureCollection"===c,x="Feature"===c,d=g?e.features.length:1,m=0;m<d;m++){a=(h=!!(f=g?e.features[m].geometry:x?e.geometry:e)&&"GeometryCollection"===f.type)?f.geometries.length:1;for(var b=0;b<a;b++){var v=0,w=0;if(null!==(s=h?f.geometries[b]:f)){u=s.coordinates;var z=s.type;switch(y=n&&("Polygon"===z||"MultiPolygon"===z)?1:0,z){case null:break;case"Point":if(!1===r(u,p,m,v,w))return!1;p++,v++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===r(u[i],p,m,v,w))return!1;p++,"MultiPoint"===z&&v++}"LineString"===z&&v++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(o=0;o<u[i].length-y;o++){if(!1===r(u[i][o],p,m,v,w))return!1;p++}"MultiLineString"===z&&v++,"Polygon"===z&&w++}"Polygon"===z&&v++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(o=0,w=0;o<u[i].length;o++){for(l=0;l<u[i][o].length-y;l++){if(!1===r(u[i][o][l],p,m,v,w))return!1;p++}w++}v++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===t(s.geometries[i],r,n))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}(t,t=>{r[0]>t[0]&&(r[0]=t[0]),r[1]>t[1]&&(r[1]=t[1]),r[2]<t[0]&&(r[2]=t[0]),r[3]<t[1]&&(r[3]=t[1])}),r};let g=(3+8881784197001252e-31)*11102230246251565e-32;function x(t,e,r,n,i){let o,l,s,a,u=e[0],f=n[0],h=0,y=0;f>u==f>-u?(o=u,u=e[++h]):(o=f,f=n[++y]);let p=0;if(h<t&&y<r)for(f>u==f>-u?(l=u+o,s=o-(l-u),u=e[++h]):(l=f+o,s=o-(l-f),f=n[++y]),o=l,0!==s&&(i[p++]=s);h<t&&y<r;)f>u==f>-u?(a=(l=o+u)-o,s=o-(l-a)+(u-a),u=e[++h]):(a=(l=o+f)-o,s=o-(l-a)+(f-a),f=n[++y]),o=l,0!==s&&(i[p++]=s);for(;h<t;)a=(l=o+u)-o,s=o-(l-a)+(u-a),u=e[++h],o=l,0!==s&&(i[p++]=s);for(;y<r;)a=(l=o+f)-o,s=o-(l-a)+(f-a),f=n[++y],o=l,0!==s&&(i[p++]=s);return(0!==o||0===p)&&(i[p++]=o),p}function d(t){return new Float64Array(t)}let m=(3+17763568394002505e-31)*11102230246251565e-32,b=(2+13322676295501878e-31)*11102230246251565e-32,v=(9+7105427357601002e-30)*11102230246251565e-32*11102230246251565e-32,w=d(4),z=d(8),S=d(12),E=d(16),P=d(4);function M(t){return"Feature"===t.type?t.geometry:t}function F(t,e,r={}){if(!t)throw Error("point is required");if(!e)throw Error("polygon is required");let n=function(t){if(!t)throw Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return[...t.geometry.coordinates];if("Point"===t.type)return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw Error("coord must be GeoJSON Point or an Array of numbers")}(t),i=M(e),o=i.type,l=e.bbox,s=i.coordinates;if(l&&!1==(u=n,(f=l)[0]<=u[0]&&f[1]<=u[1]&&f[2]>=u[0]&&f[3]>=u[1]))return!1;"Polygon"===o&&(s=[s]);let a=!1;for(var u,f,h=0;h<s.length;++h){let t=function(t,e){var r,n,i,o,l,s,a,u,f,h=0,y=t[0],p=t[1],c=e.length;for(r=0;r<c;r++){n=0;var d=e[r],M=d.length-1;if((u=d[0])[0]!==d[M][0]&&u[1]!==d[M][1])throw Error("First and last coordinates in a ring must be the same");for(o=u[0]-y,l=u[1]-p;n<M;n++){if(s=(f=d[n+1])[0]-y,a=f[1]-p,0===l&&0===a){if(s<=0&&o>=0||o<=0&&s>=0)return 0}else if(a>=0&&l<=0||a<=0&&l>=0){if(0===(i=function(t,e,r,n,i,o){let l=(e-0)*(r-0),s=(t-0)*(n-0),a=l-s,u=Math.abs(l+s);return Math.abs(a)>=m*u?a:-function(t,e,r,n,i,o,l){let s,a,u,f,h,y,p,c,d,m,M,F,A,L,$,I,N,j,_=t-0,C=r-0,k=e-0,X=n-0;L=_*X,p=(y=0x8000001*_)-(y-_),c=_-p,d=(y=0x8000001*X)-(y-X),$=c*(m=X-d)-(L-p*d-c*d-p*m),I=k*C,p=(y=0x8000001*k)-(y-k),c=k-p,d=(y=0x8000001*C)-(y-C),M=$-(N=c*(m=C-d)-(I-p*d-c*d-p*m)),h=$-M,w[0]=$-(M+h)+(h-N),h=(F=L+M)-L,M=(A=L-(F-h)+(M-h))-I,h=A-M,w[1]=A-(M+h)+(h-I),h=(j=F+M)-F,w[2]=F-(j-h)+(M-h),w[3]=j;let T=function(t,e){let r=e[0];for(let t=1;t<4;t++)r+=e[t];return r}(0,w),Y=b*l;if(T>=Y||-T>=Y||(h=t-_,s=t-(_+h)+(h-0),h=r-C,u=r-(C+h)+(h-0),h=e-k,a=e-(k+h)+(h-0),h=n-X,f=n-(X+h)+(h-0),0===s&&0===a&&0===u&&0===f)||(Y=v*l+g*Math.abs(T),(T+=_*f+X*s-(k*u+C*a))>=Y||-T>=Y))return T;L=s*X,p=(y=0x8000001*s)-(y-s),c=s-p,d=(y=0x8000001*X)-(y-X),$=c*(m=X-d)-(L-p*d-c*d-p*m),I=a*C,p=(y=0x8000001*a)-(y-a),c=a-p,d=(y=0x8000001*C)-(y-C),M=$-(N=c*(m=C-d)-(I-p*d-c*d-p*m)),h=$-M,P[0]=$-(M+h)+(h-N),h=(F=L+M)-L,M=(A=L-(F-h)+(M-h))-I,h=A-M,P[1]=A-(M+h)+(h-I),h=(j=F+M)-F,P[2]=F-(j-h)+(M-h),P[3]=j;let G=x(4,w,4,P,z);L=_*f,p=(y=0x8000001*_)-(y-_),c=_-p,d=(y=0x8000001*f)-(y-f),$=c*(m=f-d)-(L-p*d-c*d-p*m),I=k*u,p=(y=0x8000001*k)-(y-k),c=k-p,d=(y=0x8000001*u)-(y-u),M=$-(N=c*(m=u-d)-(I-p*d-c*d-p*m)),h=$-M,P[0]=$-(M+h)+(h-N),h=(F=L+M)-L,M=(A=L-(F-h)+(M-h))-I,h=A-M,P[1]=A-(M+h)+(h-I),h=(j=F+M)-F,P[2]=F-(j-h)+(M-h),P[3]=j;let Z=x(G,z,4,P,S);L=s*f,p=(y=0x8000001*s)-(y-s),c=s-p,d=(y=0x8000001*f)-(y-f),$=c*(m=f-d)-(L-p*d-c*d-p*m),I=a*u,p=(y=0x8000001*a)-(y-a),c=a-p,d=(y=0x8000001*u)-(y-u),M=$-(N=c*(m=u-d)-(I-p*d-c*d-p*m)),h=$-M,P[0]=$-(M+h)+(h-N),h=(F=L+M)-L,M=(A=L-(F-h)+(M-h))-I,h=A-M,P[1]=A-(M+h)+(h-I),h=(j=F+M)-F,P[2]=F-(j-h)+(M-h),P[3]=j;let B=x(Z,S,4,P,E);return E[B-1]}(t,e,r,n,0,0,u)}(o,s,l,a,0,0)))return 0;(i>0&&a>0&&l<=0||i<0&&a<=0&&l>0)&&h++}u=f,l=a,o=s}}return h%2!=0}(n,s[h]);if(0===t)return!r.ignoreBoundary;t&&(a=!0)}return a}d(4),d(4),d(4),d(4),d(4),d(4),d(4),d(4),d(4),d(8),d(8),d(8),d(4),d(8),d(8),d(8),d(12),d(192),d(192),d(4),d(4),d(4),d(4),d(4),d(4),d(4),d(4),d(8),d(8),d(8),d(8),d(8),d(8),d(8),d(8),d(8),d(4),d(4),d(4),d(8),d(16),d(16),d(16),d(32),d(32),d(48),d(64),d(1152),d(1152),d(4),d(4),d(4),d(4),d(4),d(4),d(4),d(4),d(4),d(4),d(24),d(24),d(24),d(24),d(24),d(24),d(24),d(24),d(24),d(24),d(1152),d(1152),d(1152),d(1152),d(1152),d(2304),d(2304),d(3456),d(5760),d(8),d(8),d(8),d(16),d(24),d(48),d(48),d(96),d(192),d(384),d(384),d(384),d(768),d(96),d(96),d(96),d(1152);class A{constructor(t=[],e=L){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;let t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){let{data:e,compare:r}=this,n=e[t];for(;t>0;){let i=t-1>>1,o=e[i];if(r(n,o)>=0)break;e[t]=o,t=i}e[t]=n}_down(t){let{data:e,compare:r}=this,n=this.length>>1,i=e[t];for(;t<n;){let n=(t<<1)+1,o=e[n],l=n+1;if(l<this.length&&0>r(e[l],o)&&(n=l,o=e[l]),r(o,i)>=0)break;e[t]=o,t=n}e[t]=i}}function L(t,e){return t<e?-1:+(t>e)}function $(t,e){return t.p.x>e.p.x?1:t.p.x<e.p.x?-1:t.p.y!==e.p.y?t.p.y>e.p.y?1:-1:1}function I(t,e){return t.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:t.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:t.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?t.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}class N{constructor(t,e,r,n){this.p={x:t[0],y:t[1]},this.featureId=e,this.ringId=r,this.eventId=n,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(t){return this.p.x===t.p.x&&this.p.y===t.p.y}}let j=0,_=0,C=0;function k(t,e){let r="Feature"===t.type?t.geometry:t,n=r.coordinates;("Polygon"===r.type||"MultiLineString"===r.type)&&(n=[n]),"LineString"===r.type&&(n=[[n]]);for(let t=0;t<n.length;t++)for(let r=0;r<n[t].length;r++){let i=n[t][r][0],o=null;_+=1;for(let l=0;l<n[t][r].length-1;l++){o=n[t][r][l+1];let s=new N(i,j,_,C),a=new N(o,j,_,C+1);s.otherEvent=a,a.otherEvent=s,$(s,a)>0?(a.isLeftEndpoint=!0,s.isLeftEndpoint=!1):(s.isLeftEndpoint=!0,a.isLeftEndpoint=!1),e.push(s),e.push(a),i=o,C+=1}}j+=1}class X{constructor(t){this.leftSweepEvent=t,this.rightSweepEvent=t.otherEvent}}var T=function(t,e){let r=new A([],$);if("FeatureCollection"===t.type){let e=t.features;for(let t=0;t<e.length;t++)k(e[t],r)}else k(t,r);return function(t,e){e=!!e&&e;let r=[],n=new A([],I);for(;t.length;){let i=t.pop();if(i.isLeftEndpoint){let t=new X(i);for(let o=0;o<n.data.length;o++){let l=n.data[o];if(e&&l.leftSweepEvent.featureId===i.featureId)continue;let s=function(t,e){if(null===t||null===e||t.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.rightSweepEvent)||t.leftSweepEvent.isSamePoint(e.leftSweepEvent)||t.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;let r=t.leftSweepEvent.p.x,n=t.leftSweepEvent.p.y,i=t.rightSweepEvent.p.x,o=t.rightSweepEvent.p.y,l=e.leftSweepEvent.p.x,s=e.leftSweepEvent.p.y,a=e.rightSweepEvent.p.x,u=e.rightSweepEvent.p.y,f=(u-s)*(i-r)-(a-l)*(o-n),h=(a-l)*(n-s)-(u-s)*(r-l),y=(i-r)*(n-s)-(o-n)*(r-l);if(0===f)return!1;let p=h/f,c=y/f;return p>=0&&p<=1&&c>=0&&c<=1&&[r+p*(i-r),n+p*(o-n)]}(t,l);!1!==s&&r.push(s)}n.push(t)}else!1===i.isLeftEndpoint&&n.pop()}return r}(r,e)};function Y(t,e,r={}){let{removeDuplicates:n=!0,ignoreSelfIntersections:i=!0}=r,o=[];"FeatureCollection"===t.type?o=o.concat(t.features):"Feature"===t.type?o.push(t):("LineString"===t.type||"Polygon"===t.type||"MultiLineString"===t.type||"MultiPolygon"===t.type)&&o.push(f(t)),"FeatureCollection"===e.type?o=o.concat(e.features):"Feature"===e.type?o.push(e):("LineString"===e.type||"Polygon"===e.type||"MultiLineString"===e.type||"MultiPolygon"===e.type)&&o.push(f(e));let l=T(h(o),i),s=[];if(n){let t={};l.forEach(e=>{let r=e.join(",");t[r]||(t[r]=!0,s.push(e))})}else s=l;return h(s.map(t=>(function(t,e,r={}){if(!t)throw Error("coordinates is required");if(!Array.isArray(t))throw Error("coordinates must be an Array");if(t.length<2)throw Error("coordinates must be at least 2 numbers long");if(!y(t[0])||!y(t[1]))throw Error("coordinates must contain numbers");return f({type:"Point",coordinates:t},void 0,r)})(t)))}function G(t,e={}){let r=M(t);switch(!e.properties&&"Feature"===t.type&&(e.properties=t.properties),r.type){case"Polygon":return function(t,e={}){return Z(M(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}(r,e);case"MultiPolygon":return function(t,e={}){let r=M(t).coordinates,n=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return r.forEach(t=>{i.push(Z(t,n))}),h(i)}(r,e);default:throw Error("invalid poly")}}function Z(t,e){return t.length>1?function(t,e,r={}){return f({type:"MultiLineString",coordinates:t},e,r)}(t,e):function(t,e,r={}){if(t.length<2)throw Error("coordinates must be an array of two or more positions");return f({type:"LineString",coordinates:t},e,r)}(t[0],e)}function B(t,e){for(let r=0;r<t.coordinates.length-1;r++)if(function(t,e,r){let n=r[0]-t[0],i=r[1]-t[1],o=e[0]-t[0],l=e[1]-t[1];if(0!=n*l-i*o)return!1;if(Math.abs(o)>=Math.abs(l))if(o>0)return t[0]<=r[0]&&r[0]<=e[0];else return e[0]<=r[0]&&r[0]<=t[0];return l>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1]}(t.coordinates[r],t.coordinates[r+1],e.coordinates))return!0;return!1}function q(t,e,r){for(let r of e.coordinates)if(F(r,t))return!0;return Y(e,G(t),{ignoreSelfIntersections:r}).features.length>0}var O=function(t,e,{ignoreSelfIntersections:r=!0}={}){let n=!1;return p(t,t=>{p(e,e=>{if(!0===n)return!0;n=!function(t,e,{ignoreSelfIntersections:r=!0}={ignoreSelfIntersections:!0}){let n=!0;return p(t,t=>{p(e,e=>{if(!1===n)return!1;n=function(t,e,r){var n,i,o,l;switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,i=e.coordinates,n[0]!==i[0]||n[1]!==i[1];case"LineString":return!B(e,t);case"Polygon":return!F(t,e)}break;case"LineString":switch(e.type){case"Point":return!B(t,e);case"LineString":return o=t,l=e,!(Y(o,l,{ignoreSelfIntersections:r}).features.length>0);case"Polygon":return!q(e,t,r)}break;case"Polygon":switch(e.type){case"Point":return!F(e,t);case"LineString":return!q(t,e,r);case"Polygon":return!function(t,e,r){for(let r of t.coordinates[0])if(F(r,e))return!0;for(let r of e.coordinates[0])if(F(r,t))return!0;return Y(G(t),G(e),{ignoreSelfIntersections:r}).features.length>0}(e,t,r)}}return!1}(t.geometry,e.geometry,r)})}),n}(t.geometry,e.geometry,{ignoreSelfIntersections:r})})}),n};let U=Math.PI/180;function J(t,e){if("number"!=typeof t||Number.isNaN(t))throw Error(`Expected number for '${e}', got ${String(t)}`);return t}function D(t){return[J(t[0],"bbox[0] (minX)"),J(t[1],"bbox[1] (minY)"),J(t[2],"bbox[2] (maxX)"),J(t[3],"bbox[3] (maxY)")]}function K(t,e,r){var n,i,o;let l,s,a,u,f=(n=t,i=e,o=r,l=Math.sin(i*U),a=(s=Math.pow(2,o))*(n/360+.5),u=s*(.5-.25*Math.log((1+l)/(1-l))/Math.PI),(a%=s)<0&&(a+=s),[a,u,o]);return f[0]=Math.floor(f[0]),f[1]=Math.floor(f[1]),f}function R(t,e){if("number"!=typeof t||Number.isNaN(t))throw Error(`Expected number for '${e}', got ${String(t)}`);return t}class H{center;alt;zoom;zfxy;id;zfxyStr;tilehash;constructor(t,e){if("string"==typeof t){const e=function(t){let e=t.match(/^\/?(\d+)\/(?:(\d+)\/)?(\d+)\/(\d+)$/);if(!e)return;let r=e[1]??"",n=e[2]??"0",i=e[3]??"",o=e[4]??"";if(""===r||""===i||""===o)return;let l=parseInt(r,10),s=parseInt(n,10),a=parseInt(i,10),u=parseInt(o,10);if(![l,s,a,u].some(t=>Number.isNaN(t)))return{z:l,f:s,x:a,y:u}}(t)||function(t){let e,r=!1;"-"===t[0]&&(r=!0,t=t.substring(1));let n=l();for(let i of t){let o=parseInt(i,10)-1;if(!Number.isFinite(o)||o<0||o>=n.length)throw Error(`Invalid tilehash character '${i}' in '${r?"-":""}${t}'`);let s=n.at(o);if(!s)throw Error(`Invalid tilehash character '${i}' in '${r?"-":""}${t}'`);n=l(e=s)}if(!e)throw Error(`Invalid tilehash '${r?"-":""}${t}'`);return r?{...e,f:-e.f}:e}(t);if(e)this.zfxy=e,this._regenerateAttributesFromZFXY();else throw Error(`parse ZFXY failed with input: ${t}`);return}if(function(t){return"z"in t&&"f"in t&&"x"in t&&"y"in t}(t)){this.zfxy=t,this._regenerateAttributesFromZFXY();return}this.zfxy=function(t){let e=void 0!==t.alt?t.alt:0;if(e<=-0x2000000||e>=0x2000000)throw Error("ZFXY only supports altitude between -2^25 and +2^25.");let r=Math.floor(2**t.zoom*e/0x2000000),n=Math.PI/180,i=Math.sin(t.lat*n),o=2**t.zoom,l=o*(t.lng/360+.5),s=o*(.5-.25*Math.log((1+i)/(1-i))/Math.PI);return(l%=o)<0&&(l+=o),{f:r,x:Math.floor(l),y:Math.floor(s),z:t.zoom}}({...t,zoom:void 0!==e?e:25});this._regenerateAttributesFromZFXY()}up(t=1){return this.move({f:t})}down(t=1){return this.move({f:-t})}north(t=1){return this.move({y:t})}south(t=1){return this.move({y:-t})}east(t=1){return this.move({x:t})}west(t=1){return this.move({x:-t})}move(t){let e=new H(this.zfxy),r=R(e.zfxy.z,"zfxy.z"),n=R(e.zfxy.f,"zfxy.f")+(t.f??0),i=R(e.zfxy.x,"zfxy.x")+(t.x??0),o=R(e.zfxy.y,"zfxy.y")+(t.y??0);return e.zfxy=u({z:r,f:n,x:i,y:o}),e._regenerateAttributesFromZFXY(),e}parent(t){let e=void 0===t?1:R(this.zfxy.z,"zfxy.z")-R(t,"atZoom");return new H(o(this.zfxy,e))}children(){return l(this.zfxy).map(t=>new H(t))}surroundings(){return[...s(this.zfxy).filter(({z:t,f:e,x:r,y:n})=>`/${t}/${e}/${r}/${n}`!==this.zfxyStr).map(t=>new H(t)),...s(this.up().zfxy).map(t=>new H(t)),...s(this.down().zfxy).map(t=>new H(t))]}toPolygon(){var t;let[e,r,n,i]=function(t){if(Array.isArray(t)&&4===t.length&&t.every(t=>"number"==typeof t))return t;if(Array.isArray(t)&&2===t.length){let e=t[0],r=t[1],n="number"==typeof e?.lng?e.lng:Array.isArray(e)?e[0]:void 0,i="number"==typeof e?.lat?e.lat:Array.isArray(e)?e[1]:void 0,o="number"==typeof r?.lng?r.lng:Array.isArray(r)?r[0]:void 0,l="number"==typeof r?.lat?r.lat:Array.isArray(r)?r[1]:void 0;return[R(n,"bbox.minX"),R(i,"bbox.minY"),R(o,"bbox.maxX"),R(l,"bbox.maxY")]}throw Error("Unsupported BBox format returned by getBBox()")}([a(t=this.zfxy),a({...t,y:t.y+1,x:t.x+1})]);return{type:"Polygon",coordinates:[[[e,r],[n,r],[n,i],[e,i],[e,r]]]}}intersects(t){return O(this.toPolygon(),t)}intersectingNeighbors(t){let e=function(t,e){let[r,n,i,o]=D(t),l=K(r,n,32),s=K(i,o,32),a=[l[0],l[1],s[0],s[1]],u=Math.min(function(t){let[e,r,n,i]=D(t);for(let t=0;t<28;t++){let o=1<<32-(t+1);if((e&o)!=(n&o)||(r&o)!=(i&o))return t}return 28}(a),28);return 0===u?[0,0,0]:[a[0]>>>32-u,a[1]>>>32-u,u]}(c(t)),r=R(e[0],"repTile.x"),n=R(e[1],"repTile.y"),i=R(this.zfxy.z,"zfxy.z");return new H({z:"number"==typeof e[2]?e[2]:i,f:R(this.zfxy.f,"zfxy.f"),x:r,y:n}).surroundings().filter(e=>e.intersects(t))}static fromCenter(t,e=25){return new H(t,R(e,"zoom"))}static fromPoint(t,e,r,n=25){let i=R(t,"lng"),o=R(e,"lat"),l=R(n,"z"),s=R(r,"f"),a=K(i,o,l);return new H({z:l,f:s,x:R(a[0],"tile.x"),y:R(a[1],"tile.y")})}_regenerateAttributesFromZFXY(){var t,e,r;let n;if(!this.zfxy)throw Error("zfxy is not set");let i=R(this.zfxy.z,"zfxy.z"),s=R(this.zfxy.f,"zfxy.f"),u=R(this.zfxy.x,"zfxy.x"),f=R(this.zfxy.y,"zfxy.y");this.zoom=i,this.zfxyStr=`/${i}/${s}/${u}/${f}`,this.tilehash=function(t){let{f:e,x:r,y:n,z:i}=t,s=e,a="";for(;i>0;){let t={f:Math.abs(e),x:r,y:n,z:i},s=o(t),u=l(s).findIndex(t=>t.f===Math.abs(e)&&t.x===r&&t.y===n&&t.z===i);if(u<0)throw Error(`Could not determine position in parent for tile ${JSON.stringify(t)}`);a=(u+1).toString()+a,e=s.f,r=s.x,n=s.y,i=s.z}return(s<0?"-":"")+a}({z:i,f:s,x:u,y:f}),this.id=this.tilehash;let h={...(n=2*(e=t={z:i,f:s,x:u,y:f}).x+1,a({x:n,y:2*e.y+1,z:e.z+1,f:0})),alt:0x2000000*(r=t).f/2**r.z+0x2000000/2**(t.z+1)};this.center=h,this.alt=R(h.alt,"center.alt")}}let Q=t.r(8635).basePath||"";function V(){let[t,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,s]=(0,r.useState)("25"),[a,u]=(0,r.useState)(""),[f,h]=(0,r.useState)(null),[y,p]=(0,r.useState)("");return(0,e.jsxs)("div",{style:{padding:"20px",fontFamily:"sans-serif"},children:[(0,e.jsx)("h1",{children:"Spatial ID 計算ツール（クライアント計算）"}),(0,e.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p(""),h(null);try{if(!t||!i)return void p("lat と lon は必須です");let e=parseFloat(t),r=parseFloat(i),n=parseInt(l||"25",10),o=""!==a?parseFloat(a):void 0;if(!Number.isFinite(e)||!Number.isFinite(r))return void p("lat と lon は数値である必要があります");if(!Number.isFinite(n))return void p("zoom は数値である必要があります");if(""!==a&&!Number.isFinite(o))return void p("alt が指定されている場合は数値である必要があります");if(e<-85.0511287798||e>85.0511287798)return void p("lat の範囲は ±85.0511287798");if(r<-180||r>180)return void p("lon の範囲は ±180");if(n<0||n>35)return void p("zoom は 0〜35");let s=new H(void 0===o?{lng:r,lat:e}:{lng:r,lat:e,alt:o},n);h({zfxyStr:s.zfxyStr,tilehash:s.tilehash,zfxy:s.zfxy,zoom:s.zoom,center:s.center,alt:s.alt})}catch(t){console.error("[client calc] error:",t),p("計算エラー: "+(t?.message||String(t)))}},children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{children:"緯度(lat): "}),(0,e.jsx)("input",{value:t,onChange:t=>n(t.target.value),required:!0})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{children:"経度(lon): "}),(0,e.jsx)("input",{value:i,onChange:t=>o(t.target.value),required:!0})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{children:"ズーム(zoom): "}),(0,e.jsx)("input",{value:l,onChange:t=>s(t.target.value)})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{children:"高度(alt): "}),(0,e.jsx)("input",{value:a,onChange:t=>u(t.target.value)})]}),(0,e.jsx)("button",{type:"submit",children:"計算"})]}),y&&(0,e.jsx)("p",{style:{color:"red"},children:y}),f&&(0,e.jsxs)("div",{style:{marginTop:"20px"},children:[(0,e.jsx)("h2",{children:"結果"}),(0,e.jsx)("pre",{children:JSON.stringify(f,null,2)})]}),(0,e.jsx)("img",{alt:"logo",src:`${Q}/vercel.svg`,width:120,height:36})]})}t.s(["default",()=>V],477)},1899,(t,e,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",()=>t.r(477)]),e.hot&&e.hot.dispose(function(){window.__NEXT_P.push(["/"])})}]);