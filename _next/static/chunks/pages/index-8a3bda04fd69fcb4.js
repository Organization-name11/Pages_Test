(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9828)}])},9828:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var l=n(5893),r=n(7294);function o(){let[e,t]=(0,r.useState)(""),[n,o]=(0,r.useState)(""),[i,a]=(0,r.useState)("25"),[s,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(""),[x,g]=(0,r.useState)("準備完了：数値を入れて「計算」を押してください");return(0,l.jsxs)("main",{style:{padding:20,fontFamily:"system-ui, sans-serif",lineHeight:1.6},children:[(0,l.jsx)("h1",{children:"Spatial ID（ZFXY）計算：f / x / y"}),(0,l.jsx)("div",{style:{marginBottom:8,color:"#555"},children:x}),h&&(0,l.jsxs)("div",{style:{color:"white",background:"#d33",padding:8,borderRadius:6,maxWidth:560},children:["エラー: ",h]}),c&&(0,l.jsxs)("div",{style:{marginTop:12,padding:12,border:"1px solid #ddd",borderRadius:8,background:"#fafafa",maxWidth:560,fontFamily:"ui-monospace, SFMono-Regular, Menlo, monospace"},children:[(0,l.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"計算結果"}),(0,l.jsxs)("div",{children:["z: ",(0,l.jsx)("strong",{children:c.z})]}),(0,l.jsxs)("div",{children:["f: ",(0,l.jsx)("strong",{children:c.f})]}),(0,l.jsxs)("div",{children:["x: ",(0,l.jsx)("strong",{children:c.x})]}),(0,l.jsxs)("div",{children:["y: ",(0,l.jsx)("strong",{children:c.y})]})]}),(0,l.jsxs)("section",{style:{marginTop:16,display:"grid",gap:10,maxWidth:500},children:[(0,l.jsxs)("label",{children:["緯度 (lat)",(0,l.jsx)("input",{value:e,onChange:e=>t(e.target.value),placeholder:"例: 35.68"})]}),(0,l.jsxs)("label",{children:["経度 (lon)",(0,l.jsx)("input",{value:n,onChange:e=>o(e.target.value),placeholder:"例: 139.76"})]}),(0,l.jsxs)("label",{children:["ズーム (zoom)",(0,l.jsx)("input",{value:i,onChange:e=>a(e.target.value),placeholder:"例: 25"})]}),(0,l.jsxs)("label",{children:["標高 (alt, m)",(0,l.jsx)("input",{value:s,onChange:e=>d(e.target.value),placeholder:"例: 10（任意）"})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,l.jsx)("button",{type:"button",onClick:()=>{try{console.log("[onCalc click]",{lat:e,lon:n,zoom:i,alt:s}),g("計算中..."),p("");let t=parseFloat(e),l=parseFloat(n),r=parseInt(i||"25",10),o=""!==s?parseFloat(s):void 0;if(!Number.isFinite(t)||!Number.isFinite(l))throw Error("lat / lon は数値で入力してください");if(!Number.isFinite(r))throw Error("zoom は数値で入力してください");if(""!==s&&!Number.isFinite(o))throw Error("alt が指定されている場合は数値で入力してください");if(t<-85.0511287798||t>85.0511287798)throw Error("lat は ".concat(-85.0511287798,"〜").concat(85.0511287798," の範囲で入力してください"));if(l<-180||l>180)throw Error("lon は \xb1180 の範囲で入力してください");if(r<0||r>35)throw Error("zoom は 0〜35 の範囲で入力してください");let a=Math.floor((l+180)/360*Math.pow(2,r)),d=function(e,t){let n=e*Math.PI/180;return Math.floor((1-Math.log(Math.tan(n)+1/Math.cos(n))/Math.PI)/2*Math.pow(2,t))}(t,r),c=null==o||Number.isNaN(o)?0:Math.floor(o/(1*Math.pow(2,25-r))),h={z:r,f:c,x:a,y:d};console.log("[calc result]",h),u(h),g("計算完了")}catch(e){console.error("[calc error]",e),u(null),g("エラー発生"),p((null==e?void 0:e.message)||String(e))}},style:{padding:"8px 14px"},children:"計算"}),(0,l.jsx)("button",{type:"button",onClick:()=>{p(""),u(null),g("準備完了：数値を入れて「計算」を押してください")},style:{padding:"8px 14px",background:"#eee"},children:"結果クリア（入力は保持）"})]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);